<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-kubernetes-basics/kubernetes-advanced/liveness-readiness-probes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Liveness and Readiness Probes | Containers, Hands-on</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hands-on-containers.github.io/hands-on-containers/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hands-on-containers.github.io/hands-on-containers/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hands-on-containers.github.io/hands-on-containers/kubernetes-basics/kubernetes-advanced/liveness-readiness-probes"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Liveness and Readiness Probes | Containers, Hands-on"><meta data-rh="true" name="description" content="Source code: k8s-getting-started GitHub Repository"><meta data-rh="true" property="og:description" content="Source code: k8s-getting-started GitHub Repository"><link data-rh="true" rel="icon" href="/hands-on-containers/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hands-on-containers.github.io/hands-on-containers/kubernetes-basics/kubernetes-advanced/liveness-readiness-probes"><link data-rh="true" rel="alternate" href="https://hands-on-containers.github.io/hands-on-containers/kubernetes-basics/kubernetes-advanced/liveness-readiness-probes" hreflang="en"><link data-rh="true" rel="alternate" href="https://hands-on-containers.github.io/hands-on-containers/kubernetes-basics/kubernetes-advanced/liveness-readiness-probes" hreflang="x-default"><link rel="stylesheet" href="/hands-on-containers/assets/css/styles.1da5ef03.css">
<script src="/hands-on-containers/assets/js/runtime~main.94225246.js" defer="defer"></script>
<script src="/hands-on-containers/assets/js/main.d8588fce.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/hands-on-containers/"><div class="navbar__logo"><img src="/hands-on-containers/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/hands-on-containers/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Hands-on Containers</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/hands-on-containers/">Scenarios</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/armagankaratosun/hands-on-containers" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/hands-on-containers/">Hands on with Containers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/hands-on-containers/category/container-basics">Container Basics</a><button aria-label="Expand sidebar category &#x27;Container Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/hands-on-containers/category/kubernetes-basics">Kubernetes Basics</a><button aria-label="Collapse sidebar category &#x27;Kubernetes Basics&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/hands-on-containers/category/kubernetes-101">Kubernetes: 101</a><button aria-label="Expand sidebar category &#x27;Kubernetes: 101&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/hands-on-containers/kubernetes-basics/zero-downtime-deployment">Zero-downtime Deployments</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/hands-on-containers/category/kubernetes-advanced-topics">Kubernetes: Advanced Topics</a><button aria-label="Collapse sidebar category &#x27;Kubernetes: Advanced Topics&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/hands-on-containers/kubernetes-basics/kubernetes-advanced/pod-with-pvc">Working with StorageClass and PVCs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/hands-on-containers/kubernetes-basics/kubernetes-advanced/service-loadbalancer">Exposing Services via Loadbalancer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/hands-on-containers/kubernetes-basics/kubernetes-advanced/service-ingress">Exposing Services via Ingress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/hands-on-containers/kubernetes-basics/kubernetes-advanced/liveness-readiness-probes">Liveness and Readiness Probes</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/hands-on-containers/category/helm-basics">Helm Basics</a><button aria-label="Expand sidebar category &#x27;Helm Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/hands-on-containers/category/troubleshoot-and-debug">Troubleshoot and Debug</a><button aria-label="Expand sidebar category &#x27;Troubleshoot and Debug&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/hands-on-containers/category/solutions">Solutions</a><button aria-label="Expand sidebar category &#x27;Solutions&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/hands-on-containers/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/hands-on-containers/category/kubernetes-basics"><span itemprop="name">Kubernetes Basics</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/hands-on-containers/category/kubernetes-advanced-topics"><span itemprop="name">Kubernetes: Advanced Topics</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Liveness and Readiness Probes</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Liveness and Readiness Probes</h1></header><p>Source code: <a href="https://github.com/armagankaratosun/k8s-getting-started" target="_blank" rel="noopener noreferrer">k8s-getting-started GitHub Repository</a></p>
<p>You can copy/paste the YAML manifests from this guide, or clone the repository to edit and use the manifests directly.</p>
<p>For this example, we will first create the <code>ClusterIP</code> service to have internal serivce ready to forward requests to pods.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-clusterip-service">Create a ClusterIP Service<a href="#create-a-clusterip-service" class="hash-link" aria-label="Direct link to Create a ClusterIP Service" title="Direct link to Create a ClusterIP Service">​</a></h2>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterIP                       </span><span class="token comment" style="color:#999988;font-style:italic"># Internal-only access within the cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes     </span><span class="token comment" style="color:#999988;font-style:italic"># Matches the label of the Deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">protocol</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">                           </span><span class="token comment" style="color:#999988;font-style:italic"># Port exposed by the service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">targetPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic"># Port on the container that the app is running on</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-output">Example Output<a href="#example-output" class="hash-link" aria-label="Direct link to Example Output" title="Direct link to Example Output">​</a></h3>
<p>Check the <code>k8s-getting-started-with-probes-service </code> service.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">armagan@ ~ $ kubectl get svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                      TYPE           CLUSTER-IP      EXTERNAL-IP       PORT(S)        AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8s-getting-started-with-probes-service   ClusterIP      10.67.244.249   &lt;none&gt;            8080/TCP       119m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-ingress-to-expose-your-clusterip-service">Create an Ingress to Expose your ClusterIP service<a href="#create-an-ingress-to-expose-your-clusterip-service" class="hash-link" aria-label="Direct link to Create an Ingress to Expose your ClusterIP service" title="Direct link to Create an Ingress to Expose your ClusterIP service">​</a></h2>
<p>Now we need an ingress manifest to expose <code>k8s-getting-started-with-probes</code> service to the outside world. Please pay attention to <code>backend.service</code> to match with the <code>ClusterIP</code> service.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">nginx.ingress.kubernetes.io/rewrite-target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /  </span><span class="token comment" style="color:#999988;font-style:italic"># Ensures paths are properly routed to the service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;yourname&gt;.&lt;yourdomain&gt;.com&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Replace &lt;yourname&gt;.&lt;yourdomain&gt;.com with your specific domain</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">pathType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Prefix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">service</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service  </span><span class="token comment" style="color:#999988;font-style:italic"># The name of the ClusterIP service for your app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Port of the service as defined in the service.yaml file</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-output-1">Example Output<a href="#example-output-1" class="hash-link" aria-label="Direct link to Example Output" title="Direct link to Example Output">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">armagan@ ~ $ kubectl apply -f ingress.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ingress.networking.k8s.io/k8s-getting-started-ingress-probes created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">armagan@ ~ $ kubectl get ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                          CLASS   HOSTS                                                        ADDRESS                                               PORTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8s-getting-started-ingress-probes   nginx   &quot;&lt;yourname&gt;.&lt;yourdomain&gt;.com&quot;   10.0.0.1,10.0.0.2,10.0.0.3,10.0.0.4,10.0.0.5   80      77s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now you can try to access the service from the <code>HOST: &lt;yourname&gt;.&lt;yourdomain&gt;.com</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="browser-output">Browser Output<a href="#browser-output" class="hash-link" aria-label="Direct link to Browser Output" title="Direct link to Browser Output">​</a></h4>
<p><img decoding="async" loading="lazy" alt="alt text" src="/hands-on-containers/assets/images/unavailable-34b078ae4b700c2f365bcd80e3ea26a7.png" width="1283" height="151" class="img_ev3q"></p>
<p>This output is expected, since we did not deploy the application yet.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-the-application">Deploy the application<a href="#deploy-the-application" class="hash-link" aria-label="Direct link to Deploy the application" title="Direct link to Deploy the application">​</a></h2>
<p>Below are the YAML manifests for a Kubernetes Deployment using a demo application, implementing healtchecks under <code>/healthz</code>. (Located at <code>Deployments/deployment-probes.yaml</code>)</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> RollingUpdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rollingUpdate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxUnavailable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">maxSurge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> armagankaratosun/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">livenessProbe</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">httpGet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">successThreshold</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">failureThreshold</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">readinessProbe</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">httpGet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /healthz   </span><span class="token comment" style="color:#999988;font-style:italic"># Readiness check on the /healthz endpoint</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">successThreshold</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">failureThreshold</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here , The <code>Liveness Probe </code>checks if your application is still running. If this check fails several times, Kubernetes will restart the container to try to fix the problem.</p>
<ul>
<li><strong>httpGet:</strong> This specifies that Kubernetes should use an HTTP GET request to check the liveness of the container.</li>
<li><strong>path: /:</strong> This is the URL path that Kubernetes will access on the container&#x27;s IP address and specified port.</li>
<li><strong>port: 8080:</strong> This is the container port on which the probe request will be sent.</li>
<li>successThreshold: 1: This means the probe needs to succeed only once to be considered successful. Once this probe succeeds, the container is considered healthy.</li>
<li><strong>failureThreshold: 3:</strong> This is the number of times Kubernetes will try the liveness probe before giving up. After three consecutive failures, Kubernetes decides the container is not alive, and it needs to be restarted.</li>
</ul>
<p>The <code>Readiness Probe</code> determines if your application is ready to handle requests. If this check fails, Kubernetes stops sending traffic to the pod until it passes the probe, ensuring that only &quot;ready&quot; pods receive traffic.</p>
<ul>
<li><strong>httpGet:</strong> This specifies the method of the health check, similar to the liveness probe.</li>
<li><strong>path: /healthz:</strong> This path is specifically set to <code>/healthz</code> for readiness check.</li>
<li><strong>port: 8080:</strong> The port where the HTTP GET request is sent, which is the same as the liveness probe.</li>
<li><strong>successThreshold:</strong> 1: This indicates that the probe needs to succeed only once to change the pod&#x27;s status to ready.</li>
<li><strong>failureThreshold: 3:</strong> This defines the number of consecutive failures that must occur for the readiness probe to consider the container not ready. Kubernetes will try the readiness probe three times, and if all attempts fail, the pod is marked as not ready and there will be no traffic forwarded to the pod.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-output-2">Example Output<a href="#example-output-2" class="hash-link" aria-label="Direct link to Example Output" title="Direct link to Example Output">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">armagan@ ~ $ kubectl apply -f probes.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/k8s-getting-started-with-probes created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now you can see the pods are <code>STATUS</code>: <code>Running</code> but they are not <code>READY</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">armagan@ ~ $ kubectl get pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                               READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8s-getting-started-with-probes-6f7f76b47b-fg6qj   0/1     Running   0          18s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8s-getting-started-with-probes-6f7f76b47b-zp6kc   0/1     Running   0          18s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can confirm this (and also figure out what went wrong) with <code>kubectl describe pod</code> command.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">armagan@darwin ~ $ kubectl describe pod k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6f7f76b47b</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">zp6kc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">             k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6f7f76b47b</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">zp6kc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">        k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">25</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Priority</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Service Account</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">k8s-getting-started-with-probes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Container ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   containerd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//ebe38c56a1de54eaf1288b328da82bca3a66dbd896abc04774688079fbf92dd7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          armagankaratosun/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       docker.io/armagankaratosun/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started@sha256</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0b3993ffe6b8ff5fe689583e3da1c8143dbe920eddb893f563aac58ee50fda7c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">           8080/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Host Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      0/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">State</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">Started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      Thu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 28 Nov 2024 04</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">08</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">51 +0100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          </span><span class="token boolean important" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Restart Count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Liveness</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">8080/ delay=0s timeout=1s period=10s </span><span class="token comment" style="color:#999988;font-style:italic">#success=1 #failure=3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Readiness</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">8080/healthz delay=0s timeout=1s period=10s </span><span class="token comment" style="color:#999988;font-style:italic">#success=1 #failure=3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Conditions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type                        Status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodReadyToStartContainers   True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Initialized                 True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ready                       False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ContainersReady             False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodScheduled                True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Events</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type     Reason     Age               From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Scheduled  19s               default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler  Successfully assigned k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">25/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6f7f76b47b</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">zp6kc to k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">generic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">worker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mcvxl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">wtfkw.datacoord.ewc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Pulling    18s               kubelet            Pulling image &quot;armagankaratosun/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Normal   Pulled     17s               kubelet            Successfully pulled image &quot;armagankaratosun/k8s-getting-started:v4&quot; in 1.092s (1.092s including waiting). Image size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 52293103 bytes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Created    17s               kubelet            Created container k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Started    16s               kubelet            Started container k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Warning  Unhealthy  16s               kubelet            Readiness probe failed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Get &quot;http://10.66.250.145:8080/healthz&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">dial tcp 10.66.250.145:8080</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">connect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> connection refused</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Warning  Unhealthy  9s (x3 over 15s)  kubelet            Readiness probe failed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">HTTP probe failed with statuscode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">503</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Warning  Unhealthy  9s                kubelet            Liveness probe failed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">HTTP probe failed with statuscode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">503</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can check <code>Events</code>, <code>Conditions</code> and <code>Containers.Ready</code> and <code>Containers.Restart Count</code> to see both <code>Readiness</code> and <code>Liveness</code> probes are failing.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="browser-output-1">Browser Output<a href="#browser-output-1" class="hash-link" aria-label="Direct link to Browser Output" title="Direct link to Browser Output">​</a></h4>
<p><img decoding="async" loading="lazy" alt="alt text" src="/hands-on-containers/assets/images/unavailable-34b078ae4b700c2f365bcd80e3ea26a7.png" width="1283" height="151" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wait-until-the-liveness-and-readiness-probes-succeed">Wait Until the Liveness and Readiness Probes Succeed<a href="#wait-until-the-liveness-and-readiness-probes-succeed" class="hash-link" aria-label="Direct link to Wait Until the Liveness and Readiness Probes Succeed" title="Direct link to Wait Until the Liveness and Readiness Probes Succeed">​</a></h3>
<p>Now, simply keep an eye on the pods. After the initialization phase, the pods should reach a <code>READY</code> status.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>However, this might not be the case for all pods! Pods can get stuck in a  <code>STATUS:CrashLoopBackoff</code> if there are issues with:</p><ol>
<li>The pod itself,</li>
<li>The liveness probe,</li>
<li>Or both.</li>
</ol></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">armagan@ ~ $ kubectl get pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                               READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8s-getting-started-with-probes-6f7f76b47b-fg6qj   1/1     Running   0          5m58s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k8s-getting-started-with-probes-6f7f76b47b-zp6kc   1/1     Running   0          5m58s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and now <code>Conditions</code> and <code>Containers.Ready</code> should be the either <code>True</code> or <code>Running</code>.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">armagan@darwin ~ $ kubectl describe pod k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6f7f76b47b</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">zp6kc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">             k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6f7f76b47b</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">zp6kc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">        k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">25</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Priority</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">k8s-getting-started-with-probes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Container ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   containerd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//ebe38c56a1de54eaf1288b328da82bca3a66dbd896abc04774688079fbf92dd7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          armagankaratosun/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       docker.io/armagankaratosun/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started@sha256</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">0b3993ffe6b8ff5fe689583e3da1c8143dbe920eddb893f563aac58ee50fda7c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">           8080/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Host Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      0/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">State</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">Started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      Thu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 28 Nov 2024 04</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">08</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">51 +0100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          </span><span class="token boolean important" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Restart Count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Liveness</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">8080/ delay=0s timeout=1s period=10s </span><span class="token comment" style="color:#999988;font-style:italic">#success=1 #failure=3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Readiness</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      http</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">8080/healthz delay=0s timeout=1s period=10s </span><span class="token comment" style="color:#999988;font-style:italic">#success=1 #failure=3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Conditions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type                        Status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodReadyToStartContainers   True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Initialized                 True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ready                       True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ContainersReady             True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodScheduled                True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Events</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type     Reason     Age                From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Scheduled  10m                default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler  Successfully assigned k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">25/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6f7f76b47b</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">zp6kc to k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">training</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">generic</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">worker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mcvxl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">wtfkw.datacoord.ewc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Pulling    10m                kubelet            Pulling image &quot;armagankaratosun/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Normal   Pulled     10m                kubelet            Successfully pulled image &quot;armagankaratosun/k8s-getting-started:v4&quot; in 1.092s (1.092s including waiting). Image size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 52293103 bytes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Created    10m                kubelet            Created container k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal   Started    10m                kubelet            Started container k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">getting</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">started</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">with</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">probes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Warning  Unhealthy  10m                kubelet            Readiness probe failed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">Get &quot;http://10.66.250.145:8080/healthz&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">dial tcp 10.66.250.145:8080</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">connect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> connection refused</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Warning  Unhealthy  10m (x3 over 10m)  kubelet            Readiness probe failed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">HTTP probe failed with statuscode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">503</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Warning  Unhealthy  10m (x2 over 10m)  kubelet            Liveness probe failed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">HTTP probe failed with statuscode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">503</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now let&#x27;s check the browser output again.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="browser-output-2">Browser Output<a href="#browser-output-2" class="hash-link" aria-label="Direct link to Browser Output" title="Direct link to Browser Output">​</a></h4>
<p><img decoding="async" loading="lazy" alt="alt text" src="/hands-on-containers/assets/images/probes-1-688cdfc3a87c1bb430237b32d8b24321.png" width="978" height="445" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bonus-points">Bonus Points<a href="#bonus-points" class="hash-link" aria-label="Direct link to Bonus Points" title="Direct link to Bonus Points">​</a></h2>
<ol>
<li>Identify the reasons behind the failure of the Liveness and Readiness probes in the pod.</li>
<li>Identify a method to access the application&#x27;s /healthz endpoint.</li>
<li>Attempt to resolve the issues.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/armagankaratosun/hands-on-containers/tree/main/packages/create-docusaurus/templates/shared/docs/kubernetes-basics/kubernetes-advanced/liveness-readiness-probes.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/hands-on-containers/kubernetes-basics/kubernetes-advanced/service-ingress"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Exposing Services via Ingress</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/hands-on-containers/category/helm-basics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Helm Basics</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-a-clusterip-service" class="table-of-contents__link toc-highlight">Create a ClusterIP Service</a><ul><li><a href="#example-output" class="table-of-contents__link toc-highlight">Example Output</a></li></ul></li><li><a href="#create-an-ingress-to-expose-your-clusterip-service" class="table-of-contents__link toc-highlight">Create an Ingress to Expose your ClusterIP service</a><ul><li><a href="#example-output-1" class="table-of-contents__link toc-highlight">Example Output</a></li></ul></li><li><a href="#deploy-the-application" class="table-of-contents__link toc-highlight">Deploy the application</a><ul><li><a href="#example-output-2" class="table-of-contents__link toc-highlight">Example Output</a></li><li><a href="#wait-until-the-liveness-and-readiness-probes-succeed" class="table-of-contents__link toc-highlight">Wait Until the Liveness and Readiness Probes Succeed</a></li></ul></li><li><a href="#bonus-points" class="table-of-contents__link toc-highlight">Bonus Points</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/hands-on-containers/">Scenarios</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Armagan Karatosun, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>