"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2091],{4773:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var r=n(4848),t=n(8453);const o={sidebar_position:2,title:"Your First Dockerfile and Image"},s=void 0,c={id:"container-basics/docker-101/dockerfile/first-dockerfile",title:"Your First Dockerfile and Image",description:"Step-by-step Guide",source:"@site/docs/container-basics/docker-101/dockerfile/first-dockerfile.md",sourceDirName:"container-basics/docker-101/dockerfile",slug:"/container-basics/docker-101/dockerfile/first-dockerfile",permalink:"/hands-on-containers/container-basics/docker-101/dockerfile/first-dockerfile",draft:!1,unlisted:!1,editUrl:"https://github.com/armagankaratosun/hands-on-containers/tree/main/packages/create-docusaurus/templates/shared/docs/container-basics/docker-101/dockerfile/first-dockerfile.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Your First Dockerfile and Image"},sidebar:"tutorialSidebar",previous:{title:"Quick Recap on Dockerfile",permalink:"/hands-on-containers/container-basics/docker-101/dockerfile/quick-recap"},next:{title:"Run Your First Container",permalink:"/hands-on-containers/container-basics/docker-101/run-first-container"}},a={},d=[{value:"Step-by-step Guide",id:"step-by-step-guide",level:2},{value:"Clone the Repository",id:"clone-the-repository",level:3},{value:"Your First Dockerfile",id:"your-first-dockerfile",level:3},{value:"Tips",id:"tips",level:4},{value:"Build the Docker Image",id:"build-the-docker-image",level:3},{value:"What just happened?",id:"what-just-happened",level:3},{value:"Verify that you have created the image",id:"verify-that-you-have-created-the-image",level:2},{value:"Bonus Points",id:"bonus-points",level:2}];function l(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h2,{id:"step-by-step-guide",children:"Step-by-step Guide"}),"\n",(0,r.jsx)(i.h3,{id:"clone-the-repository",children:"Clone the Repository"}),"\n",(0,r.jsx)(i.p,{children:"Use the command below to clone an example application repository to your local environment:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"git clone https://github.com/estebanx64/python-docker-example\n"})}),"\n",(0,r.jsx)(i.h3,{id:"your-first-dockerfile",children:"Your First Dockerfile"}),"\n",(0,r.jsx)(i.p,{children:"Navigate to the repository directory and create your Dockerfile to containerize the application:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:" nano Dockerfile\n"})}),"\n",(0,r.jsx)(i.h4,{id:"tips",children:"Tips"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Start with the ",(0,r.jsx)(i.code,{children:"FROM"})," instruction to define the base image. Since this is a python application, look for a base image (from ",(0,r.jsx)(i.a,{href:"https://hub.docker.com/",children:"Docker Hub"}),") that has python in it."]}),"\n",(0,r.jsxs)(i.li,{children:["Docker CLI has a command ",(0,r.jsx)(i.code,{children:"docker search"})," to search images from Docker Hub."]}),"\n",(0,r.jsx)(i.li,{children:"Don't forget to copy the source code and install the requirements."}),"\n",(0,r.jsxs)(i.li,{children:["The ",(0,r.jsx)(i.code,{children:"EXPOSE"})," instruction informs Docker that the container listens on the specified port at runtime."]}),"\n",(0,r.jsxs)(i.li,{children:["Bonus points for running the app without the ",(0,r.jsx)(i.code,{children:"root"})," user."]}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["Use the ",(0,r.jsx)(i.a,{href:"quick-recap#dockerfile-commands-explained",children:"Dockerfile Commands Explained"})," section to figure out how you can write your own ",(0,r.jsx)(i.code,{children:"Dockerfile"}),"."]}),"\n",(0,r.jsx)(i.h3,{id:"build-the-docker-image",children:"Build the Docker Image"}),"\n",(0,r.jsx)(i.p,{children:"Build your Docker image with the following command:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"docker build -t my-first-image:v1 .\n"})}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Example output"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"armagan@ ~/python-docker-example (main?) $ docker build -t my-first-image:v1 .\n[+] Building 45.5s (11/11) FINISHED                                                                       docker:desktop-linux\n => [internal] load build definition from Dockerfile                                                                      0.0s\n => => transferring dockerfile: 525B                                                                                      0.0s\n => [internal] load .dockerignore                                                                                         0.0s\n => => transferring context: 2B                                                                                           0.0s\n => => sha256:b52e97a85736bc3a6bfb081ec3f2a5b828233120b2138080af1761e504b06529 9.72kB / 9.72kB                            0.0s\n => => sha256:4a8c358388c0950410845ee83a2738094505c8ce199c9b0f2d25eccaa283082c 6.20kB / 6.20kB                            0.0s\n...\n => [internal] load build context                                                                                         0.0s\n => => transferring context: 31.68kB                                                                                      0.0s\n...\n => exporting to image                                                                                                    0.1s\n => => exporting layers                                                                                                   0.1s\n => => writing image sha256:cf4db668dc69fc5509224c1bab13458d05dbdf6520331ca0cbaf48f6e0b3c761                              0.0s\n => => naming to docker.io/library/my-first-image:v1                                                                      0.0s\n"})}),"\n",(0,r.jsx)(i.h3,{id:"what-just-happened",children:"What just happened?"}),"\n",(0,r.jsxs)(i.p,{children:["Docker has created a new container image from the files in the current directory. This image is named and tagged ",(0,r.jsx)(i.code,{children:"my-first-image:v1"}),". Each instruction in the Dockerfile has been converted into a read-only layer, which is cached for faster builds in the future."]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.code,{children:"-t (Tag):"})," The ",(0,r.jsx)(i.code,{children:"-t"})," flag allows you to name and tag your Docker image. In this case, ",(0,r.jsx)(i.code,{children:"my-first-image"})," is the name, and ",(0,r.jsx)(i.code,{children:"v1"})," is the tag. The full name ",(0,r.jsx)(i.code,{children:"my-first-image:v1"})," makes it easy to reference this image later. Tags help differentiate versions or variations of the same image, which is useful when you\u2019re updating or managing multiple versions."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.code,{children:". (Dot):"})," The ",(0,r.jsx)(i.code,{children:"."})," specifies the build context, which is the directory Docker will use to find the Dockerfile and any files referenced within it. The dot here refers to the current directory."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.admonition,{type:"warning",children:(0,r.jsx)(i.p,{children:"Docker will use the contents of this directory as the context to build the image, so make sure that all necessary files (including the Dockerfile) are in and all unrelated files are out from this directory."})}),"\n",(0,r.jsx)(i.h2,{id:"verify-that-you-have-created-the-image",children:"Verify that you have created the image"}),"\n",(0,r.jsx)(i.p,{children:"Verify the Image Creation Check if your Docker image was created successfully:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"docker image ls\n"})}),"\n",(0,r.jsxs)(i.p,{children:["You should see ",(0,r.jsx)(i.code,{children:"my-first-image:v1"})," listed in the output."]}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Example output:"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"armagan@ ~/python-docker-example (main?) $ docker image ls\nREPOSITORY                                       TAG       IMAGE ID       CREATED          SIZE\nmy-first-image                                   v1        ce2ef73c1e8a   16 minutes ago   1.08GB\n"})}),"\n",(0,r.jsx)(i.h2,{id:"bonus-points",children:"Bonus Points"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["Run ",(0,r.jsx)(i.code,{children:"docker history my-first-image:v1"})]}),"\n",(0,r.jsxs)(i.li,{children:["Run ",(0,r.jsx)(i.code,{children:"docker inspect my-first-image:v1"})]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"and try to understand what happened."})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>c});var r=n(6540);const t={},o=r.createContext(t);function s(e){const i=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:i},e.children)}}}]);