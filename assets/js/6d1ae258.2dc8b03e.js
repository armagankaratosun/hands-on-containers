"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1573],{2454:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var s=n(4848),r=n(8453);const a={sidebar_position:3,title:"Your First Deployment"},i=void 0,o={id:"kubernetes-basics/kubernetes-101/your-first-deployment",title:"Your First Deployment",description:"Source code: k8s-getting-started GitHub Repository",source:"@site/docs/kubernetes-basics/kubernetes-101/your-first-deployment.md",sourceDirName:"kubernetes-basics/kubernetes-101",slug:"/kubernetes-basics/kubernetes-101/your-first-deployment",permalink:"/hands-on-containers/kubernetes-basics/kubernetes-101/your-first-deployment",draft:!1,unlisted:!1,editUrl:"https://github.com/armagankaratosun/hands-on-containers/tree/main/packages/create-docusaurus/templates/shared/docs/kubernetes-basics/kubernetes-101/your-first-deployment.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Your First Deployment"},sidebar:"tutorialSidebar",previous:{title:"Getting Kubernetes (Locally)",permalink:"/hands-on-containers/kubernetes-basics/kubernetes-101/getting-kubernetes"},next:{title:"Let's Break Your First Deployment",permalink:"/hands-on-containers/kubernetes-basics/kubernetes-101/break-your-first-deployment"}},c={},l=[{value:"Apply the Initial Deployment",id:"apply-the-initial-deployment",level:2},{value:"Example Output",id:"example-output",level:3},{value:"Create a Service manifest",id:"create-a-service-manifest",level:2},{value:"Example Output",id:"example-output-1",level:3},{value:"Use <code>kubeclt port-forward</code> to Expose Service Locally",id:"use-kubeclt-port-forward-to-expose-service-locally",level:2},{value:"Example Output",id:"example-output-2",level:3}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["Source code: ",(0,s.jsx)(t.a,{href:"https://github.com/armagankaratosun/k8s-getting-started",children:"k8s-getting-started GitHub Repository"})]}),"\n",(0,s.jsx)(t.p,{children:"You can copy/paste the YAML manifests from this guide, or clone the repository to edit and use the manifests directly."}),"\n",(0,s.jsxs)(t.p,{children:["Below are the YAML manifests for a Kubernetes Deployment using a demo container image. (Located at ",(0,s.jsx)(t.code,{children:"Deployments/deployment.yaml"}),")"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: k8s-getting-started\n  labels:\n    app: k8s-getting-started\nspec:\n  replicas: 5\n  strategy:\n    type: Recreate # Specifies the strategy type as "Recreate", meaning that pods will be updated all at once\n  selector:\n    matchLabels:\n      app: k8s-getting-started\n  template:\n    metadata:\n      labels:\n        app: k8s-getting-started\n    spec:\n      containers:\n        - name: k8s-getting-started\n          image: armagankaratosun/k8s-getting-started:v1\n          ports:\n            - containerPort: 8080\n'})}),"\n",(0,s.jsx)(t.h2,{id:"apply-the-initial-deployment",children:"Apply the Initial Deployment"}),"\n",(0,s.jsx)(t.p,{children:"To deploy, run:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"kubectl apply -f deployment.yaml -n <your-namespace>\n"})}),"\n",(0,s.jsx)(t.h3,{id:"example-output",children:"Example Output"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"armagan@ ~ $ kubectl apply -f k8s-getting-started/Deployments/deployment.yaml -n <your-namespace>\ndeployment.apps/k8s-getting-started created\n"})}),"\n",(0,s.jsx)(t.p,{children:"You can list the available pods"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"armagan@ ~ $ kubectl get pods -n <your-namespace>\n\nNAME                                   READY   STATUS    RESTARTS   AGE\nk8s-getting-started-6697dbc867-9r49d   1/1     Running   0          31s\nk8s-getting-started-6697dbc867-rfm25   1/1     Running   0          32s\nk8s-getting-started-6697dbc867-tjr4w   1/1     Running   0          32s\nk8s-getting-started-6697dbc867-w5jbb   1/1     Running   0          31s\nk8s-getting-started-6697dbc867-zrp2z   1/1     Running   0          32s\n"})}),"\n",(0,s.jsx)(t.h2,{id:"create-a-service-manifest",children:"Create a Service manifest"}),"\n",(0,s.jsxs)(t.p,{children:["This will create a ",(0,s.jsx)(t.code,{children:"ClusterIP"})," service, accessible only from within the cluster (or via ",(0,s.jsx)(t.code,{children:"kubectl port-forward"}),"). (Located at ",(0,s.jsx)(t.code,{children:"Services/service-clusterip.yaml"}),")"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Service\nmetadata:\n  name: k8s-getting-started-service\nspec:\n  selector:\n    app: k8s-getting-started\n  ports:\n    - protocol: TCP\n      port: 8080\n      targetPort: 8080\n  type: ClusterIP\n"})}),"\n",(0,s.jsx)(t.h3,{id:"example-output-1",children:"Example Output"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"armagan@ ~ $ kubectl apply -f k8s-getting-started/Services/service-clusterip.yaml -n <your-namespace>\nservice/k8s-getting-started-service created\n"})}),"\n",(0,s.jsx)(t.p,{children:"To view the services:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"NAME                          TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)    AGE\nk8s-getting-started-service   ClusterIP   10.67.18.167   <none>        8080/TCP   20s\nkubernetes                    ClusterIP   10.67.0.1      <none>        443/TCP    13h\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Note that this service only has a ",(0,s.jsx)(t.code,{children:"CLUSTER-IP"})," and no ",(0,s.jsx)(t.code,{children:"EXTERNAL-IP"}),", meaning it\u2019s accessible only within the cluster."]}),"\n",(0,s.jsxs)(t.h2,{id:"use-kubeclt-port-forward-to-expose-service-locally",children:["Use ",(0,s.jsx)(t.code,{children:"kubeclt port-forward"})," to Expose Service Locally"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"kubectl port-forward service/k8s-getting-started-service 8080:8080\n"})}),"\n",(0,s.jsx)(t.h3,{id:"example-output-2",children:"Example Output"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"armagan@ ~ $ kubectl port-forward service/k8s-getting-started-service 8080:8080\n\nForwarding from 127.0.0.1:8080 -> 8080\nForwarding from [::1]:8080 -> 8080\nHandling connection for 8080\nHandling connection for 8080\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Now, you can access the app in your browser at ",(0,s.jsx)(t.a,{href:"http://localhost:8080",children:"http://localhost:8080"})]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"alt text",src:n(8659).A+"",width:"816",height:"628"})})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8659:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/blue-fea573f56041b145d0ace80d5a8016dc.png"},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var s=n(6540);const r={},a=s.createContext(r);function i(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);