"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7434],{1420:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=t(4848),a=t(8453);const r={sidebar_position:2,title:"Deploy Your First Helm Chart"},s=void 0,o={id:"helm-basics/deploy-your-first-helm-chart",title:"Deploy Your First Helm Chart",description:"Serching Helm Charts",source:"@site/docs/helm-basics/deploy-your-first-helm-chart.md",sourceDirName:"helm-basics",slug:"/helm-basics/deploy-your-first-helm-chart",permalink:"/hands-on-containers/helm-basics/deploy-your-first-helm-chart",draft:!1,unlisted:!1,editUrl:"https://github.com/armagankaratosun/hands-on-containers/tree/main/packages/create-docusaurus/templates/shared/docs/helm-basics/deploy-your-first-helm-chart.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Deploy Your First Helm Chart"},sidebar:"tutorialSidebar",previous:{title:"Installing Helm on Windows, macOS, and Linux",permalink:"/hands-on-containers/helm-basics/getting-helm"},next:{title:"Create Your First Helm Chart",permalink:"/hands-on-containers/helm-basics/your-first-helm-chart"}},l={},c=[{value:"Serching Helm Charts",id:"serching-helm-charts",level:2},{value:"Setting Up Repositories",id:"setting-up-repositories",level:2},{value:"Add Repository",id:"add-repository",level:3},{value:"Update Your Repositories",id:"update-your-repositories",level:3},{value:"Search for <code>nginx</code> in the Bitnami Repository",id:"search-for-nginx-in-the-bitnami-repository",level:3},{value:"Installing the Nginx Helm Chart from Bitnami Repository",id:"installing-the-nginx-helm-chart-from-bitnami-repository",level:2},{value:"Fetch the Default <code>values.yaml</code> File",id:"fetch-the-default-valuesyaml-file",level:3},{value:"Modify the Values File",id:"modify-the-values-file",level:3},{value:"Deploy the Chart with the Custom Values",id:"deploy-the-chart-with-the-custom-values",level:3},{value:"Verify the Deployment",id:"verify-the-deployment",level:3},{value:"Uninstall Your First Helm Chart",id:"uninstall-your-first-helm-chart",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"serching-helm-charts",children:"Serching Helm Charts"}),"\n",(0,i.jsx)(n.p,{children:"To begin working with Helm, you first need to configure your Helm repository. Artifact Hub is an excellent resource to explore available Helm repositories and find detailed installation instructions."}),"\n",(0,i.jsxs)(n.p,{children:["For example, to search for the ",(0,i.jsx)(n.code,{children:"nginx"})," chart on the Helm Hub (now part of Artifact Hub), you can use the Helm command-line tool"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"armagan@ ~ $ helm search hub nginx\nURL                                               \tCHART VERSION\tAPP VERSION                            \tDESCRIPTION\nhttps://artifacthub.io/packages/helm/wiremind/n...\t2.1.1        \t                                       \tAn NGINX HTTP server\nhttps://artifacthub.io/packages/helm/ashu-nginx...\t0.1.0        \t1.16.0                                 \tA Helm chart for Kubernetes\nhttps://artifacthub.io/packages/helm/zrepo-test...\t5.1.5        \t1.16.1                                 \tChart for the nginx server\n....\nhttps://artifacthub.io/packages/helm/bitnami-ak...\t13.2.12      \t1.23.2                                 \tNGINX Open Source is a web \nhttps://artifacthub.io/packages/helm/bitnami/nginx\t18.2.6       \t1.27.3                                 \tNGINX Open Source is a web server that can be a...\nhttps://artifacthub.io/packages/helm/jfrog/nginx  \t15.1.5       \t1.25.2                                 \tNGINX Open Source is a web server that can be a...\n.....\n"})}),"\n",(0,i.jsxs)(n.p,{children:["or ",(0,i.jsx)(n.a,{href:"https://artifacthub.io/",children:"ArtifactHub.io"})," webpage."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt-text",src:t(8898).A+"",width:"1548",height:"1043"})}),"\n",(0,i.jsx)(n.p,{children:"Bitnami charts are a trusted source for secure and up-to-date applications. Therefore, using Bitnami charts can be considered as a good practice."}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-repositories",children:"Setting Up Repositories"}),"\n",(0,i.jsx)(n.h3,{id:"add-repository",children:"Add Repository"}),"\n",(0,i.jsxs)(n.p,{children:["To search for ",(0,i.jsx)(n.code,{children:"nginx"})," charts hosted by Bitnami, ensure you have added the Bitnami repository:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'helm repo add bitnami https://charts.bitnami.com/bitnami\n\n"bitnami" has been added to your repositories\n'})}),"\n",(0,i.jsx)(n.h3,{id:"update-your-repositories",children:"Update Your Repositories"}),"\n",(0,i.jsx)(n.p,{children:"It is also a good practice to update the available repositories before installing charts:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'helm repo update\n\n...Successfully got an update from the "bitnami" chart repository\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"search-for-nginx-in-the-bitnami-repository",children:["Search for ",(0,i.jsx)(n.code,{children:"nginx"})," in the Bitnami Repository"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"armagan@ ~ $ helm search repo bitnami/nginx\n\nNAME                            \tCHART VERSION\tAPP VERSION\tDESCRIPTION\nbitnami/nginx                   \t18.2.6       \t1.27.3     \tNGINX Open Source is a web server that can be a...\nbitnami/nginx-ingress-controller\t11.5.4       \t1.11.3     \tNGINX Ingress Controller is an Ingress controll...\nbitnami/nginx-intel             \t2.1.15       \t0.4.9      \tDEPRECATED NGINX Open Source for Intel is a lig...\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Here, we would like to deploy ",(0,i.jsx)(n.code,{children:"bitnami/nginx:18.2.6"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"installing-the-nginx-helm-chart-from-bitnami-repository",children:"Installing the Nginx Helm Chart from Bitnami Repository"}),"\n",(0,i.jsxs)(n.h3,{id:"fetch-the-default-valuesyaml-file",children:["Fetch the Default ",(0,i.jsx)(n.code,{children:"values.yaml"})," File"]}),"\n",(0,i.jsx)(n.p,{children:"We first need to fetch the default values of the nginx chart and customize it if necessary. You can use the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"armagan@\\ ~ $ helm show values bitnami/nginx > values.yaml\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This command downloads the default values of the nginx chart and saves them to a file named ",(0,i.jsx)(n.code,{children:"values.yaml"})," in your current directory. You can then open this file in a text editor to make any necessary changes."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'armagan@\\ ~ $ vim values.yaml\n\n# Copyright Broadcom, Inc. All Rights Reserved.\n# SPDX-License-Identifier: APACHE-2.0\n\n## @section Global parameters\n## Global Docker image parameters\n## Please, note that this will override the image parameters, including dependencies, configured to use the global value\n## Current available global Docker image parameters: imageRegistry, imagePullSecrets and storageClass\n\n## @param global.imageRegistry Global Docker image registry\n## @param global.imagePullSecrets Global Docker registry secret names as an array\n##\nglobal:\n  imageRegistry: ""\n  ## E.g.\n  ## imagePullSecrets:\n  ##   - myRegistryKeySecretName\n  ##\n  imagePullSecrets: []\n  ## Compatibility adaptations for Kubernetes platforms\n  ##\n  compatibility:\n    ## Compatibility adaptations for Openshift\n    ##\n    openshift:\n      ## @param global.compatibility.openshift.adaptSecurityContext Adapt the securityContext sections of the deployment to make them compatible with Openshift restricted-v2 SCC: remove runAsUser, runAsGroup and fsGroup and let the platform use their allowed default IDs. Possible values: auto (apply if the detected running cluster is Openshift), force (perform the adaptation always), disabled (do not perform adaptation)\n      ##\n      adaptSecurityContext: auto\n\n.......\n'})}),"\n",(0,i.jsx)(n.h3,{id:"modify-the-values-file",children:"Modify the Values File"}),"\n",(0,i.jsxs)(n.p,{children:["Now, open the ",(0,i.jsx)(n.code,{children:"values.yaml"})," file with your preferred text editor. Here, we want to customize:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'nameOverride: "my-first-helm-chart"\nreplicaCount: 3\nservice:\n  type: ClusterIP\n'})}),"\n",(0,i.jsx)(n.p,{children:"Make sure to save your changes."}),"\n",(0,i.jsx)(n.h3,{id:"deploy-the-chart-with-the-custom-values",children:"Deploy the Chart with the Custom Values"}),"\n",(0,i.jsxs)(n.p,{children:["Once you've configured your ",(0,i.jsx)(n.code,{children:"values.yaml"})," file with the desired settings, you can deploy the nginx chart using these custom values:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'armagan@ ~ $ helm install my-nginx bitnami/nginx -f values.yaml\nNAME: my-nginx\nLAST DEPLOYED: Thu Nov 28 04:50:32 2024\nNAMESPACE: k8s-training-25\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\nNOTES:\nCHART NAME: nginx\nCHART VERSION: 18.2.6\nAPP VERSION: 1.27.3\n\n** Please be patient while the chart is being deployed **\nNGINX can be accessed through the following DNS name from within your cluster:\n\n    my-nginx-my-first-helm-chart.k8s-training-25.svc.cluster.local (port 80)\n\nTo access NGINX from outside the cluster, follow the steps below:\n\n1. Get the NGINX URL by running these commands:\n\n    export SERVICE_PORT=$(kubectl get --namespace k8s-training-25 -o jsonpath="{.spec.ports[0].port}" services my-nginx-my-first-helm-chart)\n    kubectl port-forward --namespace k8s-training-25 svc/my-nginx-my-first-helm-chart ${SERVICE_PORT}:${SERVICE_PORT} &\n    echo "http://127.0.0.1:${SERVICE_PORT}"\n\nWARNING: There are "resources" sections in the chart not set. Using "resourcesPreset" is not recommended for production. For production installations, please set the following values according to your workload needs:\n  - cloneStaticSiteFromGit.gitSync.resources\n  - resources\n+info https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/\n'})}),"\n",(0,i.jsx)(n.h3,{id:"verify-the-deployment",children:"Verify the Deployment"}),"\n",(0,i.jsx)(n.p,{children:"After deploying, you can check the status of your release to ensure it's running correctly:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"armagan@ ~ $ helm list\nNAME    \tNAMESPACE      \tREVISION\tUPDATED                             \tSTATUS  \tCHART       \tAPP VERSION\nmy-nginx\tk8s-training-25\t1       \t2024-11-28 04:50:32.769394 +0100 CET\tdeployed\tnginx-18.2.6\t1.27.3\n"})}),"\n",(0,i.jsx)(n.p,{children:"or"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"armagan@ ~ $ helm status my-nginx\n\nNAME: my-nginx\nLAST DEPLOYED: Thu Nov 28 04:50:32 2024\nNAMESPACE: k8s-training-25\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\nNOTES:\nCHART NAME: nginx\nCHART VERSION: 18.2.6\nAPP VERSION: 1.27.3\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"You can also check the Kubernetes services to confirm that the nginx is deployed as you defined."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"armagan@ ~ $ kubectl get pods\nNAME                                               READY   STATUS    RESTARTS   AGE\nmy-nginx-my-first-helm-chart-79d4c69646-n4mr9      1/1     Running   0          2m35s\nmy-nginx-my-first-helm-chart-79d4c69646-tlpww      1/1     Running   0          2m35s\nmy-nginx-my-first-helm-chart-79d4c69646-xhdf8      1/1     Running   0          2m35s\n"})}),"\n",(0,i.jsx)(n.h2,{id:"uninstall-your-first-helm-chart",children:"Uninstall Your First Helm Chart"}),"\n",(0,i.jsx)(n.p,{children:"To uninstall a chart, simply run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'armagan@ ~ $ helm list\nNAME    \tNAMESPACE      \tREVISION\tUPDATED                             \tSTATUS  \tCHART       \tAPP VERSION\nmy-nginx\tk8s-training-25\t1       \t2024-11-28 04:50:32.769394 +0100 CET\tdeployed\tnginx-18.2.6\t1.27.3\n\narmagan@ ~ $ helm uninstall my-nginx\nrelease "my-nginx" uninstalled\n'})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8898:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/artifacthub-c6e7c942acdc8f7994f96c1d85da400d.png"},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(6540);const a={},r=i.createContext(a);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);